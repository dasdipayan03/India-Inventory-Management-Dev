<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>India Inventory Management ‚Äî Login</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <style>
    * {
      box-sizing: border-box;
      font-family: "Segoe UI", Arial, sans-serif;
    }

    :root {
      --accent: #0ea5e9;
      --accent-dark: #0284c7;
      --muted: #6b7280;
      --bg: #f8fafc;
      --card: #ffffff;
    }

    body {
      margin: 0;
      background: linear-gradient(135deg, rgba(14, 165, 233, 0.06), rgba(2, 132, 199, 0.03));
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .site {
      width: 100%;
      max-width: 1350px;
      border-radius: 16px;
      overflow: hidden;
      display: grid;
      grid-template-columns: 1fr 1fr;
      background: #fff;
      box-shadow: 0 12px 40px rgba(2, 6, 23, 0.08);
    }

    /* ---------- LEFT AUTH ---------- */
    .auth {
      padding: 28px 40px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
    }

    .auth-card {
      background: #ffffff;
      border-radius: 14px;
      padding: 22px;
      box-shadow:
        0 10px 30px rgba(2, 6, 23, 0.08),
        0 1px 0 rgba(255, 255, 255, 0.8) inset;
      margin-top: 10px;
    }

    .auth-head {
      margin-bottom: 10px;
    }

    .auth-head h2 {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.3px;
    }

    .auth-head .lead {
      font-size: 14px;
      color: #475569;
    }

    .brand {
      display: flex;
      gap: 14px;
      align-items: center;
      margin-bottom: 12px;
    }

    .logo {
      width: 56px;
      height: 56px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: #fff;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 6px 18px rgba(14, 165, 233, 0.18);
    }

    .brand h1 {
      margin: 0;
      font-size: 18px;
      color: #0f172a;
      font-weight: 600;
    }

    .brand p {
      margin: 0;
      color: var(--muted);
      font-size: 13px;
    }

    #msg {
      min-height: 0px;
      margin-top: 6px;
    }

    .form {
      display: none;
      animation: fadeIn .3s ease;
      margin-top: 6px;
    }

    .form.active {
      display: block;
      margin-top: 6px;
    }

    .input-group {
      display: flex;
      align-items: center;
      gap: 10px;
      background: linear-gradient(#ffffff, #f9fbfd);
      border: 1px solid #e5edf5;
      border-radius: 12px;
      padding: 12px 14px;
      margin-bottom: 14px;
      transition: all 0.25s ease;
    }

    .input-group i {
      color: var(--muted);
    }

    .input-group input {
      border: none;
      outline: none;
      background: transparent;
      flex: 1;
      font-size: 14px;
      color: #0f172a;
    }

    .btn {
      width: 100%;
      padding: 13px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      color: #fff;
      font-weight: 700;
      cursor: pointer;
      box-shadow:
        0 10px 24px rgba(14, 165, 233, 0.35),
        0 2px 0 rgba(255, 255, 255, 0.25) inset;
      transition: all .25s ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow:
        0 14px 32px rgba(14, 165, 233, 0.45);
    }

    .btn:active {
      transform: translateY(0);
    }

    .small-links {
      text-align: center;
      margin-top: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .small-links a {
      color: var(--accent);
      text-decoration: none;
      font-weight: 600;
    }

    .small-links a:hover {
      text-decoration: underline;
    }

    /* ---------- RIGHT PROMO ---------- */
    .promo {
      background: linear-gradient(135deg, rgba(14, 165, 233, 0.06), rgba(2, 132, 199, 0.03));
      display: flex;
      flex-direction: column;
      gap: 18px;
      justify-content: center;
    }

    .slides {
      position: relative;
      height: 220px;
      border-radius: 16px;
      background: linear-gradient(180deg, #5fc8ff, #eaf6fb);
      padding: 22px;
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.6),
        0 20px 40px rgba(2, 6, 23, 0.12);
    }

    .slide {
      position: absolute;
      inset: 0;
      padding: 18px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 8px;
      opacity: 0;
      transform: translateY(8px);
      transition: all .6s ease;
      text-align: left;
    }

    .slide h3 {
      margin: 0;
      font-size: 18px;
      color: #0f172a;
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6);
    }

    .slide p {
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.45;
    }

    .slide:nth-child(1) {
      animation: slideAnim 15s infinite 0s;
    }

    .slide:nth-child(2) {
      animation: slideAnim 15s infinite 3s;
    }

    .slide:nth-child(3) {
      animation: slideAnim 15s infinite 6s;
    }

    .slide:nth-child(4) {
      animation: slideAnim 15s infinite 9s;
    }

    .slide:nth-child(5) {
      animation: slideAnim 15s infinite 12s;
    }

    @keyframes slideAnim {
      0% {
        opacity: 0;
        transform: translateY(8px);
      }

      6% {
        opacity: 1;
        transform: translateY(0);
      }

      24% {
        opacity: 1;
        transform: translateY(0);
      }

      30% {
        opacity: 0;
        transform: translateY(-8px);
      }

      100% {
        opacity: 0;
        transform: translateY(-8px);
      }
    }

    .dots {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      align-items: center;
    }

    .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #e6eef6;
    }

    .dot.active {
      background: var(--accent);
      box-shadow: 0 6px 14px rgba(14, 165, 233, 0.16);
    }

    .features {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 8px;
    }

    .feature {
      transition: all 0.25s ease;
      background: #fff;
      border-radius: 10px;
      padding: 12px;
      border: 1px solid #eef6fb;
      display: flex;
      gap: 10px;
    }

    .feature:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(2, 6, 23, 0.12);
    }

    .feature i {
      font-size: 18px;
      color: var(--accent);
      min-width: 28px;
      text-align: center;
    }

    .feature strong {
      display: block;
      font-size: 14px;
      color: #0f172a;
    }

    .feature span {
      font-size: 13px;
      color: var(--muted);
    }

    .about {
      margin-top: 12px;
      font-size: 13px;
      color: var(--muted);
      line-height: 1.55;
    }

    /* success popup */
    #successScreen {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn .3s ease;
    }

    .success-box {
      background: #fff;
      padding: 30px 40px;
      border-radius: 14px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.18);
    }

    .success-box i {
      font-size: 40px;
      color: #22c55e;
      margin-bottom: 10px;
    }

    .success-box h3 {
      margin: 6px 0;
      color: #0f172a;
    }

    .success-box p {
      margin: 0;
      color: var(--muted);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-6px);
      }

      to {
        opacity: 1;
        transform: none;
      }
    }

    @media(max-width:980px) {
      .site {
        grid-template-columns: 1fr;
        max-width: 740px;
      }

      .promo {
        order: -1;
        padding: 22px;
      }

      .slides {
        height: 80px;
      }

      .features {
        grid-template-columns: 1fr;
      }
    }

    @media(max-width:420px) {
      body {
        padding: 0px;
      }

      .auth {
        padding: 18px;
      }

      .promo {
        padding: 18px;
      }

      .slides {
        height: 150px;
        padding: 14px;
      }

      .brand h1 {
        font-size: 16px;
      }
    }

    .site-footer {
      background: #ffffff;
      box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
      border-top: 1px solid #e5e7eb;
      padding: 14px 22px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      /* allows wrapping on smaller screens */
      font-family: "Segoe UI", Arial, sans-serif;
      position: relative;
      z-index: 10;
    }

    .footer-links {
      display: flex;
      gap: 18px;
      font-size: 13px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: #6b7280;
      text-decoration: none;
      transition: color 0.2s ease;
      cursor: pointer;
      white-space: nowrap;
    }

    .footer-links a:hover {
      color: #0ea5e9;
      text-decoration: underline;
    }

    .copyright {
      font-size: 13px;
      color: #6b7280;
    }

    /* ‚úÖ Responsive Smart Footer */
    @media (max-width: 600px) {
      .site-footer {
        flex-direction: column;
        justify-content: center;
        text-align: center;
        gap: 6px;
        padding: 16px 10px;
      }

      .footer-links {
        justify-content: center;
        gap: 14px;
        font-size: 14px;
      }

      .copyright {
        margin-top: 4px;
        font-size: 13px;
        color: #6b7280;
      }
    }

    /* ===== üåê Modern Responsive Footer Popup ===== */
    .footer-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9998;
      padding: 16px;
    }

    .footer-popup-overlay.active {
      display: flex;
    }

    .footer-popup {
      background: #ffffff;
      border-radius: 14px;
      width: 100%;
      max-width: 460px;
      padding: 26px 28px;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.25);
      text-align: left;
      animation: fadeUp 0.35s ease;
      font-family: "Segoe UI", Arial, sans-serif;
    }

    .footer-popup h3 {
      margin: 0 0 10px;
      font-size: 18px;
      color: #0f172a;
      font-weight: 700;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 6px;
    }

    .footer-popup p {
      color: #374151;
      font-size: 14px;
      line-height: 1.6;
      margin: 8px 0;
    }

    .footer-popup .close-btn {
      margin-top: 16px;
      background: #0ea5e9;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      width: 100%;
    }

    .footer-popup .close-btn:hover {
      background: #0284c7;
      transform: translateY(-1px);
    }

    /* ‚ú® Smooth entrance */
    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(25px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== üì± Mobile-Friendly Adjustments ===== */
    @media (max-width: 480px) {
      .footer-popup {
        padding: 20px;
        max-width: 90%;
        font-size: 15px;
        text-align: center;
      }

      .footer-popup h3 {
        font-size: 17px;
      }

      .footer-popup p {
        font-size: 13.5px;
      }

      .footer-popup .close-btn {
        padding: 10px 12px;
        font-size: 13.5px;
      }
    }

    .popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeIn 0.3s ease;
    }

    .popup-box {
      background: #fff;
      padding: 32px 42px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
      transform: scale(0.95);
      animation: popUp 0.35s ease forwards;
    }

    .popup-box i {
      font-size: 44px;
      margin-bottom: 10px;
    }

    .popup-box.success i {
      color: #22c55e;
    }

    .popup-box.error i {
      color: #ef4444;
    }

    .popup-box h3 {
      margin: 8px 0;
      font-size: 20px;
      color: #0f172a;
    }

    .popup-box p {
      margin: 0;
      font-size: 14px;
      color: #6b7280;
    }

    .password-group {
      position: relative;
    }

    .toggle-password {
      position: absolute;
      right: 12px;
      font-size: 15px;
      color: #94a3b8;
      cursor: pointer;
      transition: all 0.25s ease;
      padding: 4px;
      border-radius: 50%;
    }

    .toggle-password:hover {
      color: #0ea5e9;
      background: rgba(14, 165, 233, 0.08);
      box-shadow: 0 0 8px rgba(14, 165, 233, 0.2);
    }

    .toggle-password.active {
      color: #0284c7;
      background: rgba(14, 165, 233, 0.12);
      box-shadow: 0 0 10px rgba(2, 132, 199, 0.3);
      transform: scale(1.1);
    }

    .toggle-password {
      opacity: 0.8;
    }

    .toggle-password.active {
      opacity: 1;
    }

    .input-group:focus-within {
      border-color: var(--accent);
      box-shadow:
        0 0 0 3px rgba(14, 165, 233, 0.12),
        0 6px 18px rgba(14, 165, 233, 0.18);
      transform: translateY(-1px);
    }


    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes popUp {
      0% {
        opacity: 0;
        transform: scale(0.9);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }




    /* ‚ú® Smart occasion system (improved full fit) */
    /* .slides:has(.poster-active) .slide {
      animation: none !important;
      opacity: 0 !important;
      transform: none !important;
    } */

    /* Full-area festive poster */
    /* .slides:has(.poster-active) .poster-active {
      position: absolute !important;
      inset: 0 !important;
      width: 100%;
      height: 100%;
      display: flex !important;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 12px;
      text-align: center;
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    } */


    /* üéÜ Happy New Year 2026 Poster */
    /* .newyear-poster {
      background: linear-gradient(135deg, #f18339bf, #69f35abf);
      padding: 24px;
    }

    .newyear-poster h2 {
      font-size: 2.1rem;
      font-weight: 800;
      letter-spacing: 0.5px;
      color: #2720fb;
    }

    .ny-badge {
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 700;
      background: linear-gradient(135deg, #38bdf8, #0ea5e9);
      color: #020617;
      margin-bottom: 8px;
    } */
  </style>
</head>

<body>
  <div class="site" role="main">
    <!-- LEFT AUTH -->
    <div class="auth">
      <div class="brand">
        <div class="logo">IIM</div>
        <div>
          <h1>India Inventory Management (Devlopment)</h1>
          <p>Management System</p>
        </div>
      </div>

      <div class="auth-head">
        <h2>Welcome</h2>
        <div class="lead">Sign in / Log in</div>
      </div>

      <div id="msg"></div>

      <!-- LOGIN -->
      <div class="auth-card">
        <div class="form active" id="login">
          <div class="input-group"><i class="fa-solid fa-envelope"></i>
            <input id="loginEmail" type="email" placeholder="Email" autocomplete="email" />
          </div>
          <div class="input-group password-group">
            <i class="fa-solid fa-lock"></i>
            <input id="loginPassword" type="password" placeholder="Password" autocomplete="current-password" />
            <i class="fa-solid fa-eye toggle-password" id="togglePassword"></i>
          </div>
          <button id="loginBtn" class="btn"><i class="fa-solid fa-right-to-bracket"></i> Login</button>
          <div class="small-links">
            <a href="#" id="forgotLink">Forgot password?</a> |
            <a href="#" id="createAccountLink">Create an account</a>
          </div>
        </div>
      </div>

      <!-- REGISTER -->
      <div class="form" id="register">
        <div class="input-group"><i class="fa-solid fa-shop"></i>
          <input id="regName" type="text" placeholder="Shop Name" />
        </div>
        <div class="input-group"><i class="fa-solid fa-envelope"></i>
          <input id="regEmail" type="email" placeholder="Email" />
        </div>
        <div class="input-group"><i class="fa-solid fa-lock"></i>
          <input id="regPassword" type="password" placeholder="Password" />
        </div>
        <button id="registerBtn" class="btn"><i class="fa-solid fa-user-plus"></i> Register</button>
        <div class="small-links"><a href="#" id="backToLogin1">Back to login</a></div>
      </div>

      <!-- FORGOT -->
      <div class="form" id="forgot">
        <div class="input-group"><i class="fa-solid fa-envelope"></i>
          <input id="forgotEmail" type="email" placeholder="Enter your email" />
        </div>
        <button id="forgotBtn" class="btn"><i class="fa-solid fa-paper-plane"></i> Send Reset Link</button>
        <div class="small-links"><a href="#" id="backToLogin2">Back to login</a></div>
      </div>
    </div>

    <!-- RIGHT PROMO -->
    <div class="promo">
      <div class="slides">
        <!-- Occasion poster (only add this when needed) -->
        <!--
        <div class="slide poster-active newyear-poster">
          <div class="ny-badge">üéâ 2026</div>
          <h2>Happy New Year</h2>
        </div> 
        -->

        <!-- Normal slides -->
        <div class="slide">
          <h3>üì¶ Smart Stock Management</h3>
          <p>Add new items and update stock quantities with buying & selling rates.</p>
        </div>

        <div class="slide">
          <h3>üìã Stock Report</h3>
          <p>View item-wise stock availability, sold quantity, and current balance instantly.</p>
        </div>

        <div class="slide">
          <h3>üßæ Sale & Invoice</h3>
          <p>Create professional invoices while stock updates automatically in real time.</p>
        </div>

        <div class="slide">
          <h3>üìä Sales Report</h3>
          <p>Generate date-wise sales reports and download them as PDF or Excel.</p>
        </div>

        <div class="slide">
          <h3>üë• Customer Due Management</h3>
          <p>Track customer credits, pending dues, and payment history easily.</p>
        </div>
      </div>




      <div class="features">

        <div class="feature">
          <i class="fa-solid fa-boxes-stacked"></i>
          <div>
            <strong>Stock Control</strong>
            <span>Add & manage unlimited items with real-time quantity tracking.</span>
          </div>
        </div>

        <div class="feature">
          <i class="fa-solid fa-file-invoice-dollar"></i>
          <div>
            <strong>Billing & Invoices</strong>
            <span>Generate clean invoices and manage sales without manual effort.</span>
          </div>
        </div>

        <div class="feature">
          <i class="fa-solid fa-chart-line"></i>
          <div>
            <strong>Sales Reports</strong>
            <span>Analyze business performance with downloadable reports.</span>
          </div>
        </div>

        <div class="feature">
          <i class="fa-solid fa-user-clock"></i>
          <div>
            <strong>Customer Dues</strong>
            <span>Track pending payments and customer balances accurately.</span>
          </div>
        </div>
      </div>





    </div>
    <!-- === FOOTER === -->
    <div class="site-footer" role="contentinfo">
      <div class="footer-links">
        <a href="#" class="footer-link" data-type="about">About</a>
        <a href="#" class="footer-link" data-type="contact">Contact</a>
        <a href="#" class="footer-link" data-type="privacy">Privacy</a>
      </div>
      <div class="copyright">¬© 2025 India Inventory Management</div>
    </div>
  </div>

  <!-- === POPUP OVERLAY === -->
  <div id="footerPopupOverlay" class="footer-popup-overlay">
    <div class="footer-popup">
      <h3 id="popupTitle"></h3>
      <p id="popupContent"></p>
      <button class="close-btn" id="popupClose">Close</button>
    </div>
  </div>

  <!-- GLOBAL POPUPS -->
  <div id="successScreen" class="popup-overlay">
    <div class="popup-box success">
      <i class="fa-solid fa-circle-check"></i>
      <h3>Success!</h3>
      <p id="successText">Action completed successfully!</p>
    </div>
  </div>

  <div id="errorScreen" class="popup-overlay">
    <div class="popup-box error">
      <i class="fa-solid fa-circle-xmark"></i>
      <h3>Error!</h3>
      <p id="errorText">Something went wrong!</p>
    </div>
  </div>


  <!-- ORIGINAL JS + MODIFIED SUCCESS + FORM SWITCH -->
  <script defer>
    document.addEventListener("DOMContentLoaded", () => {
      const apiBase = window.location.origin.includes("localhost")
        ? "http://localhost:4000/api/auth"
        : "/api/auth";
      const msgEl = document.getElementById("msg");
      const successScreen = document.getElementById("successScreen");
      const successText = document.getElementById("successText");

      // Unified popup function ‚Äî global, works for all (success + error)
      const showPopup = (type, message, redirectUrl = null, delay = 2000) => {
        const popup = document.getElementById(type === "success" ? "successScreen" : "errorScreen");
        const textEl = document.getElementById(type === "success" ? "successText" : "errorText");
        if (!popup || !textEl) return;
        textEl.textContent = message;
        popup.style.display = "flex";

        if (type === "success") {
          setTimeout(() => {
            popup.style.display = "none";
            if (redirectUrl) window.location.href = redirectUrl;
          }, delay);
        }

        if (type === "error") {
          const handleClickOutside = (event) => {
            const box = popup.querySelector(".popup-box");
            if (!box.contains(event.target)) {
              popup.style.display = "none";
              document.removeEventListener("click", handleClickOutside);
            }
          };
          setTimeout(() => {
            document.addEventListener("click", handleClickOutside);
          }, 100);
        }
      };
      // end popup function

      const clearForms = () => ["loginEmail", "loginPassword", "regName", "regEmail", "regPassword", "forgotEmail"]
        .forEach(id => { const el = document.getElementById(id); if (el) el.value = ""; });


      // Register
      document.getElementById("registerBtn").addEventListener("click", async () => {
        const name = regName.value.trim(),
          email = regEmail.value.trim(),
          password = regPassword.value;

        if (!name || !email || !password)
          return showPopup("error", "All fields required!");

        try {
          const res = await fetch(apiBase + "/register", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, email, password }),
          });

          const data = await res.json();
          if (!res.ok) throw new Error(data.error || "Register failed");

          clearForms();

          // ‚úÖ unified popup
          showPopup("success", "üéâ Registration successful!");

          // after popup disappears, switch to login form
          setTimeout(() => {
            document.getElementById("register").classList.remove("active");
            document.getElementById("login").classList.add("active");
          }, 1500);

        } catch (err) {
          showPopup("error", err.message);
        }
      });


      // Login
      document.getElementById("loginBtn").addEventListener("click", async () => {
        const email = loginEmail.value.trim(), password = loginPassword.value;
        if (!email || !password) return showPopup("error", "All fields required!");
        try {
          const res = await fetch(apiBase + "/login", {
            method: "POST", headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, password })
          });
          const data = await res.json();
          if (!res.ok) throw new Error(data.error || "Login failed");
          localStorage.setItem("token", data.token);
          localStorage.setItem("user", JSON.stringify(data.user));
          showPopup("success", "‚úÖ Login successful!", "index.html", 1200);
        } catch (err) { showPopup("error", err.message); }
      });

      // Forgot Password
      document.getElementById("forgotBtn").addEventListener("click", async () => {
        const email = forgotEmail.value.trim();
        if (!email) return showPopup("error", "Enter your registered email!");
        try {
          const res = await fetch(apiBase + "/forgot-password", {
            method: "POST", headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email })
          });
          const data = await res.json();
          if (!res.ok) throw new Error(data.error || "Error");
          showPopup("success", data.message || "Reset link sent on your registered email!");
          clearForms();
        } catch (err) { showPopup("error", err.message); }
      });

      // Form switching
      const loginForm = document.getElementById("login");
      const registerForm = document.getElementById("register");
      const forgotForm = document.getElementById("forgot");
      document.getElementById("forgotLink").addEventListener("click", e => {
        e.preventDefault(); loginForm.classList.remove("active"); registerForm.classList.remove("active"); forgotForm.classList.add("active");
      });
      document.getElementById("createAccountLink").addEventListener("click", e => {
        e.preventDefault(); loginForm.classList.remove("active"); forgotForm.classList.remove("active"); registerForm.classList.add("active");
      });
      document.getElementById("backToLogin1").addEventListener("click", e => {
        e.preventDefault(); registerForm.classList.remove("active"); loginForm.classList.add("active");
      });
      document.getElementById("backToLogin2").addEventListener("click", e => {
        e.preventDefault(); forgotForm.classList.remove("active"); loginForm.classList.add("active");
      });
    });


    // Show/Hide Password Toggle
    document.addEventListener("DOMContentLoaded", () => {
      const togglePassword = document.getElementById("togglePassword");
      const passwordInput = document.getElementById("loginPassword");

      if (togglePassword && passwordInput) {
        togglePassword.addEventListener("click", () => {
          const isHidden = passwordInput.type === "password";
          passwordInput.type = isHidden ? "text" : "password";
          togglePassword.classList.toggle("fa-eye");
          togglePassword.classList.toggle("fa-eye-slash");
          togglePassword.classList.toggle("active");
        });
      }
    });

    // FOOTER SCRIPT
    const footerPopupOverlay = document.getElementById("footerPopupOverlay");
    const popupTitle = document.getElementById("popupTitle");
    const popupContent = document.getElementById("popupContent");
    const popupClose = document.getElementById("popupClose");

    const footerData = {
      about: {
        title: "About India Inventory Management",
        content: `
  <p>
    <strong>India Inventory Management</strong> is a modern, cloud-based platform built to simplify business operations
    for small shops and retailers across India. It helps you manage <b>stock, sales, invoices, customer debts,</b> and
    <b>reports</b> ‚Äî all in one place.
  </p>

  <p>
    Designed with simplicity and efficiency in mind, the system automates repetitive tasks, provides real-time updates,
    and ensures your data is securely stored in the cloud. Whether you run a local store or a growing distribution
    business, our goal is to make inventory and billing management effortless.
  </p>

  <p>
    <em>Empowering businesses with technology, precision, and peace of mind ‚Äî that‚Äôs the heart of India Inventory Management.</em>
  </p>
  `,
      },


      contact: {
        title: "Contact Us",
        content: `üìß support@india-inventory.com<br>
      üìû +91 98xxx xxxxx<br>
      üïí Mon‚ÄìSat, 10 AM ‚Äì 6 PM`,
      },
      privacy: {
        title: "Privacy Policy",
        content: `We value your privacy ‚Äî all your data is securely stored and never shared.
          By using our platform, you agree to responsible and secure data handling.
          <p>
          Notice: When you Reset your password, you may receive password reset emails from forgot.indiainventory@gmail.com
          Please do not worry ‚Äî this is our official email address.
          </p>`
      },

    };

    document.querySelectorAll(".footer-link").forEach(link => {
      link.addEventListener("click", e => {
        e.preventDefault();
        const type = link.dataset.type;
        const data = footerData[type];
        popupTitle.textContent = data.title;
        popupContent.innerHTML = data.content;
        footerPopupOverlay.classList.add("active");
      });
    });

    popupClose.addEventListener("click", () => {
      footerPopupOverlay.classList.remove("active");
    });

    footerPopupOverlay.addEventListener("click", e => {
      if (e.target === footerPopupOverlay) {
        footerPopupOverlay.classList.remove("active");
      }
    });

  </script>

  <script>
    const token = localStorage.getItem("token");
    if (token) window.location.replace("index.html");
  </script>
</body>

</html>